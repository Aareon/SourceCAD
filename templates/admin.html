<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width" />
   <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.ico') }}" />
   <link rel="stylesheet" href="{{ url_for('static', filename='styles/style.css') }}">
   <title>Admin | SourceCAD</title>

  <script>
  function goBack() {
    window.history.back()
  }
  </script>
</head>

<header>
  <div class="back">
    <button onclick="goBack()" class="button_back" type="button" name="button">Back</button>
  </div>
</header>

<body>
  <div class="admin_container">

    <div class="tables">
      <div class="user_table">
        <table style="float:left;margin-right:40px;">
          <caption>Users</caption>
          <tr>
            <th>User</th>
            <th>Role</th>
            <th>User Snowflake</th>
          </tr>
          <!-- in onclick="%edit%" change the hash to a edit portion -->
          <tr onclick="#">
            <td>{{user}}</td>
            <td>{{user_role}}</td>
            <td>{{user_snowflake}}</td>
          </tr>
        </table>
      </div>

      <div class="activity_table">
        <table style="margin-right:20px;">
          <caption>User Activity</caption>
          <tr>
            <th>User</th>
            <th>Rank</th>
            <th>Last Login Date</th>
            <th>Last Login Time</th>
          </tr>
          <!-- in onclick="%edit%" change the hash to a edit portion -->
          {{ logins_table }}
        </table>
      </div>
    </div>

    <div class="adduser">
      <form method="POST" action="">
        {% if session.error is not none %}
          <caption>{{session.error}}</caption>
        {% endif %}
        <input style="width:98%;" type="text" name="user_name" placeholder="Username">
        <input style="width:98%;" type="text" name="user_email" placeholder="Email">
        <h4 style="display:inline;">Dispatch:</h4> <input style="display:inline;margin-top:4px;margin-bottom:0px;" id="check" type="checkbox" name="is_dispatch"><br>
        <h4 style="display:inline;">Civilian:</h4> <input style="display:inline;margin-top:4px;margin-bottom:0px;" id="check" type="checkbox" name="is_civilian"><br>
        <h4 style="display:inline;">Officer:</h4> <input style="display:inline;margin-top:4px;margin-bottom:0px;" id="check" type="checkbox" name="is_officer"><br>
        <input id="submit" style="width:98%;" type="submit" name="submit" value="Create User">
      </form>
    </div>

    <div class="edit_user">
      <form style="border-bottom:2px solid gray;margin-bottom:10px;" method="POST" action="">
        <input style="width:90%;" type="text" name="search_user" placeholder="Search a user">
        <input id="submit" style="width:8%;padding:3px;height:43px;" type="submit" value="Search" name="Search a user">
      </form>
      <form method="POST" action="">
        <input style="width:98%;" type="text" name="user_name" placeholder="Username">
        <input style="width:98%;" type="text" name="user_email" placeholder="Email">
        <h4 style="display:inline;">Dispatch:</h4> <input style="display:inline;margin-top:4px;margin-bottom:0px;" id="check" type="checkbox" name="is_dispatch"><br>
        <h4 style="display:inline;">Civilian:</h4> <input style="display:inline;margin-top:4px;margin-bottom:0px;" id="check" type="checkbox" name="is_civilian"><br>
        <h4 style="display:inline;">Officer:</h4> <input style="display:inline;margin-top:4px;margin-bottom:0px;" id="check" type="checkbox" name="is_officer"><br>
        <input id="submit" style="width:98%;" type="submit" value="Edit User">
        <input id="remove" style="width:98%;" type="submit" value="Remove User">
      </form>
    </div>

    <div style="float:left;" id="form-token">
      <form method="POST" action="">
        <input id="submit" style="width:98%;" name="submit" type="submit" value="Generate New Token">
        <input style="width:96%;" type="text" name="current_token" value="{{ current_token }}" readonly="readonly">
      </form>
    </div>
  
  <form method="POST" action="">
    <div class="registration-admin">
      <p id="mini-header-admin">User Applications</p>
      {% for applicant in applicants %}
        <div id="single-registration">
          <strong>Username: </strong>{{applicant['username']}} <strong>Email:</strong> {{applicant['email']}}
          <strong>Roles:</strong>
          {% if applicant[4] %}[Law Enforcement]{% endif %}
          {% if applicant['is_civilian'] %}[Civilian]{% endif %}
          {% if applicant['is_dispatch'] %}[Dispatch]{% endif %}
          <input name="Approve" id="submit" style="width:10%;" type="submit" value="Approve">
          <input name="Reject" id="remove" style="width:10%;" type="submit" value="Reject">
          <input type="hidden" name="username" id="username" value={{applicant['username']}}>
          <input type="hidden" name="email" id="email" value={{applicant['email']}}>
        </div>
      {% endfor %}
    </div>
  </form>

  </div>
</body>

</html>
